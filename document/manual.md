# Руководство пользователя — калькулятор fast_calc

## Назначение

**fast_calc** — это консольный калькулятор, который поддерживает:

* обычные арифметические операции;
* функции (тригонометрические, логарифмы, корни, степени);
* математические константы (`pi`, `e`);
* модуль, факториал, вложенные скобки;
* обозначение углов в градусах (через символ `'`).

Калькулятор работает с вещественными числами двойной точности и поддерживает приоритет операций.

---

## Основные операции

| Операция  | Обозначение | Пример    | Результат |   |     |   |   |
| --------- | ----------- | --------- | --------- | - | --- | - | - |
| Сложение  | `+`         | `2+3`     | 5         |   |     |   |   |
| Вычитание | `-`         | `7-4`     | 3         |   |     |   |   |
| Умножение | `*`         | `3*4`     | 12        |   |     |   |   |
| Деление   | `/`         | `10/4`    | 2.5       |   |     |   |   |
| Степень   | `^`         | `2^3`     | 8         |   |     |   |   |
| Факториал | `!`         | `5!`      | 120       |   |     |   |   |
| Скобки    | `( )`       | `(2+3)*4` | 20        |   |     |   |   |
| Модуль    | `           |           | `         | ` | 5-8 | ` | 3 |

---

## Работа с градусами

Если нужно указать угол **в градусах**, добавьте после числа символ апострофа `'`.

Примеры:

```
sin(90')   → 1
cos(180')  → -1
tan(45')   → 1
```

Без `'` аргументы тригонометрических функций считаются в **радианах**:

```
sin(pi/2)  → 1
```

---

## Константы

| Имя  | Значение          |
| ---- | ----------------- |
| `pi` | 3.141592653589793 |
| `e`  | 2.718281828459045 |

Примеры:

```
2*pi      → 6.2831853
e^2       → 7.3890561
sin(pi/2) → 1
```

---

## Функции

### Одноаргументные функции

| Имя       | Описание             | Пример           |
| --------- | -------------------- | ---------------- |
| `sin(x)`  | синус                | `sin(pi/2)` = 1  |
| `cos(x)`  | косинус              | `cos(0)` = 1     |
| `tan(x)`  | тангенс              | `tan(pi/4)` = 1  |
| `asin(x)` | арксинус             | `asin(1)` = pi/2 |
| `acos(x)` | арккосинус           | `acos(0)` = pi/2 |
| `atan(x)` | арктангенс           | `atan(1)` = pi/4 |
| `sqrt(x)` | квадратный корень    | `sqrt(9)` = 3    |
| `ln(x)`   | натуральный логарифм | `ln(e)` = 1      |
| `lg(x)`   | десятичный логарифм  | `lg(100)` = 2    |
| `abs(x)`  | модуль               | `abs(-5)` = 5    |

---

### Двухаргументные функции

**Важно:** порядок аргументов особый —
в скобках **сначала идёт число (аргумент), потом основание**.

| Имя          | Назначение                          | Формат        | Пример | Результат |
| ------------ | ----------------------------------- | ------------- | ------ | --------- |
| `pow(x, y)`  | возведение в степень                | `pow(2, 3)`   | 8      |           |
| `root(x, y)` | корень степени `x` из `y`           | `root(3, 27)` | 3      |           |
| `log(x, y)`  | логарифм числа `x` по основанию `y` | `log(8, 2)`   | 3      |           |

Таким образом, `log(8, 2)` означает "логарифм 8 по основанию 2".

---

## Примеры выражений

```
1+2*3                → 7
(2+3)*4              → 20
2^3^2                → 512
sin(90')             → 1
abs(-5)+sqrt(9)      → 8
pow(2, log(8, 2))    → 8
|sin(pi/4)^2 + cos(pi/4)^2 - 1| → 0
root(2, pow(3,2)+pow(4,2))     → 5
```

---

## Возможные ошибки

| Сообщение                             | Причина                             |   |
| ------------------------------------- | ----------------------------------- | - |
| Ожидалось выражение                   | неправильный синтаксис              |   |
| Лишние токены в конце выражения       | после конца ввода остались символы  |   |
| Неизвестная функция или константа     | опечатка в имени                    |   |
| Скобки не сбалансированы              | не закрыта `)` или `                | ` |
| Функция log требует ровно 2 аргумента | пропущен аргумент                   |   |
| Деление на ноль                       | делитель равен нулю                 |   |
| Факториал отрицательного числа        | недопустим                          |   |
| sqrt(-1)                              | комплексные числа не поддерживаются |   |

---

## Использование

Программа запускается в терминале:

```
$ ./fast_calc
Введите выражение без пробелов:
> sin(90') + log(8,2)
= 4
```

Для вывода справки:

```
$ ./fast_calc --help
```

---

## Замечания

* Пробелы в выражениях лучше не использовать.
* Все функции и константы пишутся в нижнем регистре.
* Факториал `!` имеет самый высокий приоритет.
* Для очень больших выражений возможна ошибка переполнения.
* Результат выводится с динамической точностью до 15 знаков.
